using Content.Client.UserInterface.Controls;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface.Controls;
using Robust.Client.UserInterface.XAML;

namespace Content.Client.Xenoarchaeology.Ui;

[GenerateTypedNameReferences]
public sealed partial class ArtifactNukerMenu : FancyWindow
{
    public Action<string>? IndexChanged;

    public ArtifactNukerMenu()
    {
        RobustXamlLoader.Load(this);

        IoCManager.InjectDependencies(this);

        IndexLineEdit.OnTextChanged += OnIndexChanged;
        IndexLineEdit.OnTextEntered += OnIndexEnter;
    }

    private void OnIndexChanged(LineEdit.LineEditEventArgs obj)
    {
        if (!int.TryParse(obj.Text, out _))
            return;
    }

    private void OnIndexEnter(LineEdit.LineEditEventArgs obj)
    {
        if (int.TryParse(obj.Text, out var index))
            IndexChanged?.Invoke(obj.Text);
    }
}
