using Content.Client.Stylesheets.Sheetlets;
using Content.Shared.Audio.Jukebox;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface;
using Robust.Client.UserInterface.XAML;
using Robust.Shared.Prototypes;

namespace Content.Client.Audio.Jukebox;

[GenerateTypedNameReferences]
public sealed partial class TrackListingControl : Control
{
    public Action<string>? OnButtonPressed;

    private ProtoId<JukeboxPrototype> _trackId;

    public TrackListingControl(JukeboxPrototype track)
    {
        RobustXamlLoader.Load(this);

        SetTrackInfo(track);

        Button.OnPressed += (_) =>
        {
            OnButtonPressed?.Invoke(_trackId);
        };
    }

    public void SetTrackInfo(JukeboxPrototype track)
    {
        TrackName.Text = track.Name;
        TrackArtist.Text = track.Artist;
        _trackId = track.ID;
    }
}
