using Content.Client.Message;
using Content.Shared.Silicons.Laws;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface.Controls;
using Robust.Client.UserInterface.XAML;

namespace Content.Client.Silicons.Laws.Ui;

[GenerateTypedNameReferences]
public sealed partial class LawDisplay : Button
{
    private const string LawDisplayUnselectedTexturePath = "/Textures/Interface/Alerts/Abilities/silenced.png";
    private const string LawDisplaySelectedTexturePath = "/Textures/Interface/Emotes/vocal.png";

    /// <summary>
    /// The SiliconLaw tracked by this display.
    /// </summary>
    public SiliconLaw Law { get; }

    public LawDisplay(SiliconLaw law)
    {
        RobustXamlLoader.Load(this);
        IoCManager.InjectDependencies(this);

        Law = law;

        var identifier = Law.LawIdentifierOverride ?? $"{Law.Order}";
        var lawIdentifier = Loc.GetString("laws-ui-law-header", ("id", identifier));
        var lawDescription = Loc.GetString(Law.LawString);

        LawNumberLabel.SetMarkup(lawIdentifier);
        LawLabel.SetMessage(lawDescription);
    }

    /// <summary>
    /// Switches the indicator of this display depending on whether its law has been selected
    /// </summary>
    /// <param name="isSelected">Whether or not the law associated with this display is selected</param>
    public void SetLawSelectedIndicators(bool isSelected)
    {
        if (isSelected)
        {
            AddStyleClass("positive");
            LawSelectedIcon.TexturePath = LawDisplaySelectedTexturePath;
        }
        else
        {
            RemoveStyleClass("positive");
            LawSelectedIcon.TexturePath = LawDisplayUnselectedTexturePath;
        }
    }
}
