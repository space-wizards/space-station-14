- type: entity
  id: BaseBlobStructure
  name: blob
  description: A thick wall of writhing tendrils.
  categories: [ hideSpawnMenu ]
  abstract: true
  placement:
    mode: SnapgridCenter
  components:
  - type: Sprite
    sprite: Mobs/Blob/blob.rsi
    drawdepth: OverMobs
  - type: Appearance
  - type: Transform
    anchored: true
    noRot: true
  - type: Physics
    canCollide: true
  - type: Fixtures
    fixtures:
      fix1:
        hard: false
        density: 7
        shape:
          !type:PhysShapeAabb
          bounds: "-0.5,-0.5,0.5,0.5"
        layer:
        - MidImpassable
      blobNorth:
        shape:
          !type:EdgeShape
          vertex1: "-0.5,1.5"
          vertex2: "0.5, 1.5"
        layer:
        - GhostImpassable
      blobSouth:
        shape:
          !type:EdgeShape
          vertex1: "-0.5,-1.5"
          vertex2: "0.5, -1.5"
        layer:
        - GhostImpassable
      blobEast:
        shape:
          !type:EdgeShape
          vertex1: "1.5, 0.5"
          vertex2: "1.5,-0.5"
        layer:
        - GhostImpassable
      blobWest:
        shape:
          !type:EdgeShape
          vertex1: "-1.5, 0.5"
          vertex2: "-1.5,-0.5"
        layer:
        - GhostImpassable
      blobNorthEast:
        shape:
          !type:EdgeShape
          vertex1: "1.5,1.5"
          vertex2: "0.5,1.5"
        layer:
        - GhostImpassable
      blobNorthWest:
        shape:
          !type:EdgeShape
          vertex1: "-0.5,1.5"
          vertex2: "-1.5,1.5"
        layer:
        - GhostImpassable
      blobSouthEast:
        shape:
          !type:EdgeShape
          vertex1: "1.5,-1.5"
          vertex2: "0.5,-1.5"
        layer:
        - GhostImpassable
      blobSouthWest:
        shape:
          !type:EdgeShape
          vertex1: "-0.5,-1.5"
          vertex2: "-1.5,-1.5"
        layer:
        - GhostImpassable
      blobEastNorth:
        shape:
          !type:EdgeShape
          vertex1: "1.5,1.5"
          vertex2: "1.5,0.5"
        layer:
        - GhostImpassable
      blobEastSouth:
        shape:
          !type:EdgeShape
          vertex1: "1.5,-0.5"
          vertex2: "1.5,-1.5"
        layer:
        - GhostImpassable
      blobWestNorth:
        shape:
          !type:EdgeShape
          vertex1: "-1.5,1.5"
          vertex2: "-1.5,0.5"
        layer:
        - GhostImpassable
      blobWestSouth:
        shape:
          !type:EdgeShape
          vertex1: "-1.5,-0.5"
          vertex2: "-1.5,-1.5"
        layer:
        - GhostImpassable
  - type: BlobStructure
  - type: BlobCreated
  - type: Clickable
  - type: Damageable #todo fix these
    damageModifierSet: Wood
  - type: Destructible
    thresholds:
      - trigger:
          !type:DamageTrigger
          damage: 10
        behaviors:
          - !type:DoActsBehavior
            acts: [ "Destruction" ]

- type: entity
  id: BlobStructure
  parent: BaseBlobStructure
  components:
  - type: Sprite
    layers:
    - state: blob
  - type: BlobUpgradeable
    upgradeEntity: BlobStructureStrong
  - type: Tag
    tags: [ BlobAllowReplace ]

- type: entity
  id: BlobStructureStrong
  parent: BaseBlobStructure
  name: strong blob
  components:
  - type: Sprite
    layers:
    - state: blob_idle
  - type: Tag
    tags: [ BlobAllowReplace ]

- type: entity
  id: BlobStructureCore
  parent: BaseBlobStructure
  name: blob core
  description: A huge, pulsating yellow mass.
  components:
  - type: Sprite
    layers:
    - state: blob_core
  - type: BlobCore
  - type: BlobNode
    pulseRange: 4

- type: entity
  id: BlobStructureResource
  parent: BaseBlobStructure
  name: resource blob
  components:
  - type: Sprite
    layers:
    - state: blob_resource
  - type: BlobResource

- type: entity
  id: BlobStructureNode
  parent: BaseBlobStructure
  name: blob node
  description: A large, pulsating yellow mass.
  components:
  - type: Sprite
    layers:
    - state: blob_node
  - type: BlobNode
    pulseRange: 3

- type: entity
  id: BlobStructureFactory
  parent: BaseBlobStructure
  name: factory blob
  components:
  - type: Sprite
    layers:
    - state: blob_factory_2
  - type: BlobFactory
