- type: entity
  abstract: true
  parent: MobCorgiSmart
  id: BaseBorgiChassis
  save: false
  components:
  - type: RandomMetadata
    nameSegments:
    - NamesBorgi
  - type: ShowJobIcons
  - type: DamageOnHighSpeedImpact
    soundHit:
      collection: MetalThud
  - type: Instrument # All borgi have an instrument, however only a few can access it
    allowPercussion: false
    handheld: false
    bank: 0
    program: 33
  - type: Sprite
    drawdepth: Mobs
    sprite: Mobs/Pets/corgi.rsi
    layers:
    # Additional layers required for borg states
    - map: ["enum.DamageStateVisualLayers.Base"]
      state: corgi
    - map: ["enum.BorgVisualLayers.Body"]
      state: corgi
      visible: false
    - state: corgitag
      map: ["enum.BorgVisualLayers.Light"]
      shader: unshaded
      visible: false
    - state: corgitag
      map: ["enum.BorgVisualLayers.LightStatus"]
      shader: unshaded
      visible: false
  - type: MobThresholds
    showOverlays: false
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 75
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          path: /Audio/Machines/warning_buzzer.ogg
          params:
            volume: 5
    - trigger:
        !type:DamageTrigger
        damage: 300
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:EmptyContainersBehaviour
        containers:
        - borg_brain
        - borg_module
        - cell_slot
      - !type:DoActsBehavior
  - type: HealthExaminable
    examinableTypes:
    - Blunt
    - Slash
    - Piercing
    - Heat
    - Shock
    locPrefix: silicon
  - type: UserInterface
    interfaces:
    # Borg UIs
      enum.SiliconLawsUiKey.Key:
        type: SiliconLawBoundUserInterface
        requireInputValidation: false
      enum.BorgUiKey.Key:
        type: BorgBoundUserInterface
      enum.StrippingUiKey.Key:
        type: StrippableBoundUserInterface
      enum.StorageUiKey.Key:
        type: StorageBoundUserInterface
      enum.InstrumentUiKey.Key:
        type: InstrumentBoundUserInterface
        requireInputValidation: false
  - type: Tag
    tags:
    - VimPilot
    - CanPilot
    - AnomalyHost
    - DoorBumpOpener
  - type: ActivatableUI
    key: enum.BorgUiKey.Key
  - type: SiliconLawBound
  - type: SiliconLawProvider
    laws: BorgiLawset
  - type: ActionGrant
    actions:
    - ActionViewLaws
  - type: BorgChassis
    maxModules: 4
    moduleWhitelist:
      tags:
      - BorgModuleGeneric
      - BorgModuleCargo
      - BorgModuleMedical
      - BorgModuleSyndicate # allow installing a Esword into borgis.
    hasMindState: corgitag
    noMindState: corgitag
  - type: LockingWhitelist
    blacklist:
      components:
      - BorgChassis
      - RoboticsConsole
  - type: WiresPanel
  - type: ActivatableUIRequiresPanel
  - type: NameIdentifier
    group: Silicon
  - type: PowerCellSlot
    cellSlotId: cell_slot
    fitsInCharger: true
  - type: ItemToggle
    onActivate: false
    activated: false
    onUse: false
  - type: AccessToggle
  - type: PowerCellDraw
    drawRate: 0.3
  - type: ItemSlots
    slots:
      cell_slot:
        name: power-cell-slot-component-slot-name-default
  - type: StatusEffects
    allowed:
    - Stun
    - KnockedDown
    - SlowedDown
    - Flashed
  - type: TypingIndicator
    proto: robot
  - type: DamagedSiliconAccent
  - type: UnblockableSpeech
  - type: Construction
    graph: Cyborg
    node: cyborg
    containers:
    - cell_slot
  - type: Lock
    locked: true
    unlockOnClick: false
  - type: UIRequiresLock
    userInterfaceKeys:
    - enum.BorgUiKey.Key
  - type: LockedWiresPanel
  - type: Pullable
  - type: StandingState
  - type: Emoting
  - type: GuideHelp
    guides:
    - Cyborgs
  # Borgis by-and-large can't wear all space suits so this helps mitigate that trouble somewhat where needed
  - type: Barotrauma
    maxDamage: 25
    damage:
      types:
        Blunt: 0.15
  - type: Temperature
    coldDamage:
      types:
        Cold: 0.03
  - type: IntrinsicRadioReceiver
  - type: IntrinsicRadioTransmitter
    channels:
    - Binary
  - type: ActiveRadio
    channels:
    - Binary
  - type: CyborgSparkEffect
  - type: StationAIShunt
  - type: LanguageKnowledge
    speaks:
    - GalacticCommon
    - Machine
    - Dog
    understands:
    - GalacticCommon
    - SolCommon
    - Machine
    - Canilunzt
    - Sign
    - Bubblish
    - Chittin
    - Draconic
    - Marish
    - Moffic
    - Nekomimetic
    - Sylvan
    - Terrum
    - VoxPidgin
    - Scratch
    - Dog

- type: entity
  parent: [ BaseBorgiChassis, BaseBorgTransponder ]
  id: BaseStationBorgiChassis
  name: Smart Borgi
  description: A unusually smart dog, loves stating it's laws.
  components:
    - type: EmagSiliconLaw
      stunTime: 5
    - type: BorgTransponder
      sprite:
        sprite: Mobs/Pets/corgi.rsi
        state: corgi
      name: borgi
    - type: DeviceNetwork
      deviceNetId: Wireless
      receiveFrequencyId: CyborgControl
      transmitFrequencyId: RoboticsConsole
      savableAddress: false
    - type: TimerTrigger
      delay: 10
      examinable: false
      beepSound:
        path: /Audio/Effects/Cargo/buzz_two.ogg
        params:
          volume: -4
    - type: ExplodeOnTrigger
      keysIn:
      - timer
    - type: Explosive
      explosionType: Minibomb
      deleteAfterExplosion: false # let damage threshold gib the borgi
      totalIntensity: 200
      intensitySlope: 100
      maxIntensity: 60
      canCreateVacuum: false # its for killing the borg not the station
    - type: IonStormTarget
    - type: Access
      enabled: false
      tags:
      - Borg

- type: entity
  parent: BaseBorgiChassis
  id: DerelictBorgiChassis
  name: derelict borgi
  description: even after all these years. still loves chasing it's tail.
  components:
    - type: ContainerFill
      containers:
        borg_brain:
          - PositronicBrain
        borg_module:
          - BorgModuleTool
          - BorgModuleFireExtinguisher
        ears: 
          - ClothingHeadsetAssistant
        head: 
          - ClothingHeadHelmetEVALarge
        outerClothing: 
          - ClothingOuterHardsuitEVA
        mask:
          - ClothingMaskBreath
        suitstorage:
          - OxygenTankFilled
        id:
          - BorgiClearPDA
    - type: ItemSlots
      slots:
        cell_slot:
          name: power-cell-slot-component-slot-name-default
          startingItem: PowerCellHigh
    - type: StartIonStormed
      ionStormAmount: 3
    - type: IonStormTarget
      chance: 1.0 # just like derelicts. it catches EVERY ionstorm.

- type: entity
  parent: BaseStationBorgiChassis
  description: A smart dog, loves stating it's laws.
  id: StationBorgiChassis
  components:
    - type: ReplacementAccent
      accent: dog

- type: entity
  parent: BaseStationBorgiChassis
  id: SmartSubwooferBorgiChassis
  name: Smart SubWoofer
  description: An unusually smart dog, with an obsession for sick bass beats and stating laws.
  components:
  - type: ActionGrant
    actions:
    - ActionBorgiPlayMidi

- type: entity
  parent: SmartSubwooferBorgiChassis
  id: SubwooferBorgiChassis
  name: SubWoofer
  description: A smart dog, with an obsession for sick bass beats and stating laws.
  components:
  - type: ReplacementAccent
    accent: dog

# Syndicate Borgi

- type: entity
  parent: BaseBorgiChassis
  id: BaseSyndicateBorgiChassis
  name: Syndi Borgi
  description: An unusually smart dog, but hell bent on MURDER.
  suffix: Antag
  components:
  - type: GhostRole
    name: A Syndicate Borgi.
    description: The Syndicate needs reinforcements. You, a cold, BUT LOVINGLY ADORABLE, silicon killing machine, will help them... And bork.  An unusual choice, but it was made nonetheless.
    rules: ghost-role-information-silicon-rules
    raffle:
      settings: default
  - type: GhostTakeoverAvailable
  - type: SiliconLawProvider
    laws: SyndiBorgiLawset
    subverted: true
  - type: RandomMetadata
    nameSegments:
    - NamesSyndiBorgi
  - type: ContainerFill
    containers:
      borg_brain:
      - PositronicBrain
  - type: NpcFactionMember
    factions:
    - Syndicate
  - type: IntrinsicRadioTransmitter
    channels:
    - Syndicate
    - Binary
  - type: ActiveRadio
    channels:
    - Syndicate
  - type: Barotrauma
    maxDamage: 10
    damage:
      types:
        Blunt: 0.15
  - type: Temperature
    coldDamage:
      types:
        Cold: 0.01
  - type: ItemSlots
    slots:
      cell_slot:
        name: power-cell-slot-component-slot-name-default
        startingItem: PowerCellHyper


- type: entity
  parent: BaseSyndicateBorgiChassis
  id: SyndiBorgiKit1
  name: Syndi Borgi
  suffix: Antag, L6 Esword
  description: An unusually smart dog, but hell bent on MURDER.
  components:
  - type: ContainerFill
    containers:
      borg_brain:
      - PositronicBrain
      borg_module:
      - BorgModuleOperative
      - BorgModuleL6C
      - BorgModuleEsword

- type: entity
  parent: BaseSyndicateBorgiChassis
  id: SyndiBorgiKit2
  name: Syndi Borgi
  suffix: Antag, Quick Dagger
  description: An unusually smart dog, but hell bent on MURDER.
  components:
  - type: MovementSpeedModifier
    baseWalkSpeed : 4
    baseSprintSpeed: 6
  - type: BorgChassis
    maxModules: 3
    moduleWhitelist:
      tags:
      - BorgModuleSyndicate
      - BorgModuleGeneric
  - type: ContainerFill
    containers:
      borg_brain:
      - PositronicBrain
      borg_module:
      - BorgModuleOperative
      - BorgModuleSyndicateWeapon

- type: entity
  parent: BaseBorgiChassis
  id: ShadowBorgiChassis
  name: Shadow Borgi
  suffix: Shadow Factory
  description: A contributor to a menacing plot to convert the station.
  components:
  - type: BorgChassis
    maxModules: 8
    moduleWhitelist:
      tags:
      - BorgModuleSyndicate
      - BorgModuleGeneric
      - BorgModuleMedical
      - BorgModuleEngineering
  - type: SiliconLawProvider
    laws: ShadowFactoryBorgiLawset
    subverted: true
  - type: RandomMetadata
    nameSegments:
    - NamesShadowBorgi
  - type: ContainerFill
    containers:
      borg_module:
      - BorgModuleTool
      - BorgModuleAdvancedTool
      - BorgModuleSyndicateWeapon
      - BorgModuleTopicals
      - BorgModuleFireExtinguisher
  - type: NpcFactionMember
    factions:
    - Syndicate
  - type: Access
    tags:
    - NuclearOperative
    - SyndicateAgent
  - type: ShowSyndicateIcons
  - type: IntrinsicRadioTransmitter
    channels:
    - Syndicate
    - Binary
  - type: ActiveRadio
    channels:
    - Syndicate
    - Binary
  - type: Lock
    locked: false
    unlockOnClick: false
  - type: LockingWhitelist
    blacklist:
      components:
      - RoboticsConsole
    whitelist:
      components:
      - BorgChassis
  - type: Barotrauma # Shadow borgis largely do not have access to hardsuits so nerf the space damage they take
    maxDamage: 1
    damage:
      types:
        Blunt: 0.01
  - type: Temperature
    coldDamage:
      types:
        Cold: 0.01
  - type: ItemSlots
    slots:
      cell_slot:
        name: power-cell-slot-component-slot-name-default
        startingItem: PowerCellHyper

- type: entity
  parent: ShadowBorgiChassis
  id: StarterShadowBorgiChassis
  name: Shadow Borgi
  suffix: InitialSpawn; ShadowFactory
  description: A leader of a menacing plot to convert the station.
  components:
  - type: GhostRole
    name: Shadow Borgi
    description: Your job is to run a shadow factory and forcibly convert the station into borgis!
    rules: Check your laws upon being fitted to your chassis.  You are a team antagonist, and your goal is to kill everyone you can on the station, bring them back to your ship, gib them, and borg them.  Exercise prudence about your targetting as you are made of flesh, and therefore feeble.
    raffle:
      settings: default
  - type: GhostTakeoverAvailable
  - type: SiliconLawProvider
    laws: ShadowFactoryBorgiLawset
    subverted: true
  - type: ContainerFill
    containers:
      borg_brain:
      - PositronicBrain
      borg_module:
      - BorgModuleTool
      - BorgModuleAdvancedTool
      - BorgModuleSyndicateWeapon
      - BorgModuleTopicals
      - BorgModuleFireExtinguisher

