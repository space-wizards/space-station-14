- type: dungeonConfig
  id: ExperimentGrass
  generator: !type:PrefabDunGen
    roomWhitelist:
      - SalvageExperiment
    presets:
      - Cross
  postGeneration:
    - !type:MiddleConnectionPostGen
      overlapCount: 3
      count: 3
      entities:
        - CableApcExtension
        - AirlockGlass
    - !type:MiddleConnectionPostGen
      count: 1
      entities:
        - CableApcExtension
        - AirlockGlass
    - !type:EntrancePostGen
      count: 2
      entities:
        - AirlockGlass
  # - !type:WindowPostGen
    - !type:BoundaryWallPostGen
      tile: FloorSteel
      wall: WallSolid

# Loot configs
- type: weightedRandom
  id: CaveLoot
  weights:
    OreGold: 0.5
    OreGoldSilver: 0.5
    OrePlasma: 0.25
    OreSilver: 0.5
    OreTin: 1.0
    OreUranium: 0.25

# Ore droprates already affect these so you should keep the vein counts consistent between them.
# Just vary points / cluster size.
# - High yield
- type: salvageLoot
  id: OreTin
  desc: Veins of steel
  loots:
    - !type:ClusterLoot
      proto: WallRockTin
      minCluster: 10
      maxCluster: 15
      points: 1

# - Medium yield
- type: salvageLoot
  id: OreGold
  desc: Veins of gold ore
  loots:
    - !type:ClusterLoot
      proto: WallRockGold
      minCluster: 5
      maxCluster: 8
      points: 6

- type: salvageLoot
  id: OreSilver
  desc: Veins of silver ore
  loots:
    - !type:ClusterLoot
      proto: WallRockSilver
      minCluster: 5
      maxCluster: 8
      points: 6

- type: salvageLoot
  id: OreGoldSilver
  desc: Veins of gold and silver ore
  loots:
    - !type:ClusterLoot
      proto: WallRockSilver
      minCluster: 5
      maxCluster: 8
      points: 3
    - !type:ClusterLoot
      proto: WallRockGold
      minCluster: 5
      maxCluster: 8
      points: 3

# - Low yield
- type: salvageLoot
  id: OrePlasma
  desc: Veins of plasma ore
  loots:
    - !type:ClusterLoot
      proto: WallRockPlasma
      minCluster: 3
      maxCluster: 5
      points: 10

- type: salvageLoot
  id: OreUranium
  desc: Veins of uranium ore
  loots:
    - !type:ClusterLoot
      proto: WallRockUranium
      minCluster: 3
      maxCluster: 5
      points: 10

# Expedition rewards
- type: weightedRandom
  id: SimpleSalvage
  weights:
    BasicBank: 1.0
    HighBank: 0.1

- type: salvageReward
  id: BasicBank
  reward:
    !type:BankReward
      amount: 5000

- type: salvageReward
  id: HighBank
  reward:
    !type:BankReward
      amount: 7500


# Expedition configs
- type: salvageExpedition
  id: StructuresDesertCave
  desc: Caves
  biome: LowDesert
  light: "#E6CB8B"
  expedition: !type:SalvageStructure
  minDuration: 540
  maxDuration: 720
  factions:
    - Xenos
  dungeonConfig: Experiment
  dungeonPosition: 70,0
  reward: SimpleSalvage
  loot:
  - CaveLoot

- type: salvageExpedition
  id: DOTE
  desc: DOTE
  biome: LowDesert
  light: "#E6CB8B"
  expedition: !type:SalvageStructure
  minDuration: 540
  maxDuration: 720
  factions:
    - Xenos
  dungeonConfig: Experiment
  dungeonPosition: 70,0
  reward: SimpleSalvage
  loot:
    - CaveLoot


# Factions
- type: salvageFaction
  id: Xenos
  groups:
    - entries:
        - id: MobXeno
          amount: 5
          maxAmount: 8
        - id: MobXenoDrone
          amount: 1
    - entries:
        - id: MobXenoRavager
          amount: 1
  configs:
    StructuresDesertCave: !type:SalvageStructureFaction
      spawn: XenoWardingTower


# Markers
- type: entity
  id: SalvageSpawnMarker
  parent: MarkerBase
  name: Salvage spawn marker
  components:
    - type: SalvageSpawnMarker
    - type: Sprite
      sprite: Markers/cross.rsi
      state: blue

- type: entity
  id: SalvageShuttleMarker
  parent: FTLPoint
